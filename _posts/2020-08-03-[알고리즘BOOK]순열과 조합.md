---
layout: post
title:  "완전탐색"
date:   2020-08-03 11:03:53 +0900
categories: [algorithm]
use_math: true
---

## 순열

순열은 여러 요소들을 선택한 것을 `순서를 고려하여` 만든 경우의 수를 말한다. 예를들어 [가, 나, 다]와 같이 3개의 요소를 가지고 있는 집합은 [가, 나, 다], [가, 다, 나], [나, 가, 다], [나, 다, 가], [다, 가, 나], [다, 나, 가]와 같이 6가지의 경우의 수로 정렬할 수 있다. 알고리즘 문제를 풀다보면 경우의 수를 고려해야하는 문제가 굉장히 많다. 그렇기 때문에 순열 알고리즘을 구현하는 것은 상당히 중요하다.

이제부터 ['A', 'B', 'C', 'D', 'E'] 리스트에서 5가지 요소를 정렬할 수 있는 모든 경우의 수를 구해보자.

### 선택된 수를 표시하는 index

요소를 하나씩 뽑아서 정렬 시키는 작업이기 때문에 이미 선택된 요소를 표시할 수 있는 index가 필요하다. 요소가 총 5개인 list의 순열을 구하고자 할 때, 크기가 5인 list를 선언해두자. 그리고 선택되지 않았음을 의미하는 `0`을 default로 저장해두자.

```python
problem = ['A', 'B', 'C', 'D', 'E']
# 방문 index
visited = [0 for _ in range(len(problem))]
```

요소를 선택하면 1로 표시하고, `visited = 1` 일때는 요소를 선택할 수 없다.

### return 조건

**기본적으로 순열은 재귀함수를 통하여 무한 loop를 구성한다.** 그리고 무한 loop를 빠져나오기 위해서 return 조건을 걸어줘야하는데, 나는 요소를 선택하는 loop을 구성하기 전에 return의 조건을 먼저 적어두는 것이 편해서 먼저 작성한다. 완성된 배열이 `chosen` 이라고 할 때, `chosen` 의 길이가 5이면 return 한다.

```python
problem = ['A', 'B', 'C', 'D', 'E']
# 방문 index
visited = [0 for _ in range(len(problem))]

# 완성된 배열
chosen = []
# 재귀함수
def permut(arr):
  if len(chosen) == 5:
    print(chosen)
    return chosen
```

### Loop

무한 loop를 돌면서 요소를 선택하는 부분이다. `visited` 가 0일 때 (선택되지 않았을 때)만 요소를 선택해야하고 이를 `chosen` 에 추가한다. 추가한 이후에는 해당 `visited` 를 1로 바꾸어줘야 한다. 그리고 재귀함수를 호출해주면 된다. 중요한 것은 return을 한 이후 pop을 한 뒤 그 자리의 `visited` 를 0으로 바꿔주는 backtracking 부분인데, 그 원리는 아래 예시를 보면 이해가 쉽게 된다.

```python
# 순열개수
n = 0
def permut():
  problem = ['A', 'B', 'C', 'D', 'E']
  # 방문 index
  visited = [0 for _ in range(len(problem))]

  # 완성된 배열
  chosen = []

  # 재귀함수
  def recur(arr):
    if len(chosen) == 5:
      global n
      n += 1
      print(n, " : ", chosen)
      return chosen

    for i in range(len(arr)):
      if not visited[i]:
        chosen.append(arr[i])
        visited[i] = 1
        recur(arr)
        chosen.pop()
        visited[i] = 0

  recur(problem)

permut()
```

```text
A 선택 ... visited는 [1, 0, 0, 0, 0]
A B 선택 ... visited는 [1, 1, 0, 0, 0]
.
.
.
A B C D E 선택 ... visited는 [1, 1, 1, 1, 1]			*** pop, visited=0 *** RETRUN 직후이기 때문
A B C D 선택 ... visited는 [1, 1, 1, 1, 0]				*** pop, visited=0 *** i가 
A B C 선택 ... visited는 [1, 1, 1, 0, 0]


```







